version: '3.8'

services:
  web:
    build: .
    image: marutitraining:latest
    container_name: marutitraining_web
    ports:
      - "5000:80"
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - ASPNETCORE_Admin__Email=${ASPNETCORE_Admin__Email}
      - ASPNETCORE_Admin__Password=${ASPNETCORE_Admin__Password}
      - ConnectionStrings__DefaultConnection=${ConnectionStrings__DefaultConnection}
    volumes:
      - ./data:/app/data  # Persist SQLite database
    restart: unless-stopped
    networks:
      - marutitraining_network

networks:
  marutitraining_network:
    driver: bridge

# USAGE:
#
# 1. Create .env file (DO NOT COMMIT):
#    ASPNETCORE_Admin__Email=admin@marutitraining.com
#    ASPNETCORE_Admin__Password=SecurePassword123!
#    ConnectionStrings__DefaultConnection=Data Source=/app/data/MarutiTrainingPortal.db
#
# 2. Start:
#    docker compose up -d
#
# 3. Stop:
#    docker compose down
#
# 4. View logs:
#    docker compose logs -f
#
# 5. Access:
#    http://localhost:5000
#    http://localhost:5000/Admin/Account/Login
