@model List<TrainingEvent>

@{
    ViewData["Title"] = "Upcoming Workshops & Training Events | Maruti Makwana (MCT)";
    ViewData["Description"] = "Register for live technical workshops, Azure webinars, and AI training events by Maruti Makwana. Join professional development sessions and stay updated with technology.";
    ViewData["Keywords"] = "automation events, PLC workshops, SCADA webinars, technical training seminars, industrial automation events, robotics workshop, automation conference, live training sessions, upcoming courses, registration";
    ViewData["CanonicalUrl"] = "https://marutimakwana.com/events";
}

@if (Model != null && Model.Any())
{
    @* Structured Data for Events *@
    <script type="application/ld+json">
    {
      "@@context": "https://schema.org",
      "@@type": "ItemList",
      "name": "Upcoming Technical Workshops",
      "itemListElement": [
        @for (int i = 0; i < Model.Count; i++)
        {
            var trainingEvent = Model[i];
            <text>
            {
              "@@type": "ListItem",
              "position": @(i + 1),
              "item": {
                "@@type": "Event",
                "name": "@Html.Raw(trainingEvent.Title)",
                "description": "@Html.Raw(trainingEvent.Summary ?? trainingEvent.Description)",
                "startDate": "@trainingEvent.StartDate.ToString("yyyy-MM-ddTHH:mm")",
                "endDate": "@(trainingEvent.EndDate?.ToString("yyyy-MM-ddTHH:mm") ?? trainingEvent.StartDate.AddHours(2).ToString("yyyy-MM-ddTHH:mm"))",
                "eventStatus": "https://schema.org/eventscheduled",
                "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
                "location": {
                  "@@type": "Place",
                  "name": "Live Workshop / On-site",
                  "address": {
                    "@@type": "PostalAddress",
                    "addressLocality": "Ahmedabad",
                    "addressRegion": "Gujarat",
                    "addressCountry": "IN"
                  }
                },
                "performer": {
                  "@@type": "Person",
                  "name": "Maruti Makwana"
                },
                "offers": {
                  "@@type": "Offer",
                  "url": "@trainingEvent.RegistrationLink"
                }
              }
            }@(i < Model.Count - 1 ? "," : "")
            </text>
        }
      ]
    }
    </script>
}

<div class="container mt-5 mb-5">
    <div class="row mb-4">
        <div class="col-md-12">
            <h1>Upcoming Events & Trainings</h1>
            <p class="text-muted">Register for upcoming webinars, workshops, and training programs</p>
        </div>
    </div>



    @if (Model == null || Model.Count == 0)
    {
        <div class="text-center py-5">
            <i class="fas fa-calendar-alt fa-3x mb-3" style="opacity: 0.5;"></i>
            <h5>No Events Available Yet</h5>
            <p class="text-muted">No upcoming events or webinars scheduled at the moment. Check back soon!</p>
        </div>
    }
    else
    {
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            @foreach (var trainingEvent in Model)
            {
                <div class="col">
                    @if (!string.IsNullOrEmpty(trainingEvent.SkillTechUrl))
                    {
                        <!-- Card with SkillTech link - entire card is clickable -->
                        <a href="@trainingEvent.SkillTechUrl" target="_blank" class="text-decoration-none h-100 d-block">
                            <div class="card h-100 shadow-lg hover-lift" style="cursor: pointer; transition: all 0.3s ease; border-radius: 16px; overflow: hidden; border: 1px solid var(--border-color); background: var(--card-bg);">
                                <!-- Event Type Badge - Top Right -->
                                <div style="position: absolute; top: 16px; right: 16px; z-index: 10; pointer-events: none;">
                                    <span class="badge bg-success" style="font-size: 11px; padding: 6px 12px; pointer-events: none;">
                                        <i class="fas fa-external-link-alt me-1"></i>SkillTech
                                    </span>
                                </div>
                                
                                <!-- Event Banner/Header Section -->
                                @if (!string.IsNullOrEmpty(trainingEvent.BannerUrl))
                                {
                                    <div style="position: relative; width: 100%; height: 200px; overflow: hidden;">
                                        <img src="@trainingEvent.BannerUrl" alt="@trainingEvent.Title" style="width: 100%; height: 100%; object-fit: cover;">
                                        <div style="position: absolute; bottom: 16px; left: 16px;">
                                            <span class="badge badge-event-type" style="background: rgba(30, 58, 138, 0.95); color: #ffffff !important; padding: 8px 16px; font-size: 12px; font-weight: 600; letter-spacing: 0.5px;">
                                                @trainingEvent.EventType
                                            </span>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                <div style="background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); padding: 32px 24px; position: relative; min-height: 120px; display: flex; align-items: center; pointer-events: none;">
                                    <span class="badge badge-event-type" style="background: rgba(30, 58, 138, 0.95); color: #ffffff !important; padding: 8px 16px; font-size: 12px; font-weight: 600; letter-spacing: 0.5px; pointer-events: none;">
                                        </span>
                                    </div>
                                }
                                
                                <div class="card-body p-4" style="display: flex; flex-direction: column;">
                                    <h5 class="card-title mb-3" style="color: var(--text-primary); font-weight: 600; font-size: 18px; line-height: 1.4;">
                                        @trainingEvent.Title
                                    </h5>
                                    
                                    @if (!string.IsNullOrEmpty(trainingEvent.Summary))
                                    {
                                        <p class="card-text mb-3" style="color: var(--text-secondary); line-height: 1.6; font-size: 14px; flex-grow: 1; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
                                            @trainingEvent.Summary
                                        </p>
                                    }
                                    else
                                    {
                                        <p class="card-text mb-3" style="color: var(--text-secondary); line-height: 1.6; font-size: 14px; flex-grow: 1; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
                                            @(trainingEvent.Description.Length > 150 ? trainingEvent.Description.Substring(0, 150) + "..." : trainingEvent.Description)
                                        </p>
                                    }
                                    
                                    <div style="margin-top: auto; padding-top: 16px; border-top: 1px solid var(--border-color);">
                                        <div class="d-flex align-items-center gap-2" style="font-size: 13px; color: var(--text-secondary);">
                                            <i class="fas fa-calendar-alt" style="color: var(--primary);"></i>
                                            <span style="font-weight: 500;">@trainingEvent.StartDate.ToString("dd MMM yyyy, HH:mm")</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    }
                    else
                    {
                        <!-- Regular card without external link -->
                        <div class="card h-100 shadow-lg" style="border-radius: 16px; overflow: hidden; border: 1px solid var(--border-color); background: var(--card-bg); transition: all 0.3s ease;">
                            <!-- Event Banner/Header Section -->
                            @if (!string.IsNullOrEmpty(trainingEvent.BannerUrl))
                            {
                                <div style="position: relative; width: 100%; height: 200px; overflow: hidden;">
                                    <img src="@trainingEvent.BannerUrl" alt="@trainingEvent.Title" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;">
                                    <div style="position: absolute; bottom: 16px; left: 16px; pointer-events: none;">
                                        <span class="badge badge-event-type" style="background: rgba(30, 58, 138, 0.95); color: #ffffff !important; padding: 8px 16px; font-size: 12px; font-weight: 600; letter-spacing: 0.5px; pointer-events: none;">
                                            @trainingEvent.EventType
                                        </span>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <div style="background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); padding: 32px 24x; position: relative; min-height: 120px; display: flex; align-items: center; pointer-events: none;">
                                    <span class="badge badge-event-type" style="background: rgba(30, 58, 138, 0.95); color: #ffffff !important; padding: 8px 16px; font-size: 12px; font-weight: 600; letter-spacing: 0.5px; pointer-events: none;">
                                        @trainingEvent.EventType
                                    </span>
                                </div>
                            }
                            
                            <div class="card-body p-4" style="display: flex; flex-direction: column;">
                                <h5 class="card-title mb-3" style="color: var(--text-primary); font-weight: 600; font-size: 18px; line-height: 1.4;">
                                    @trainingEvent.Title
                                </h5>
                                
                                @if (!string.IsNullOrEmpty(trainingEvent.Summary))
                                {
                                    <p class="card-text mb-3" style="color: var(--text-secondary); line-height: 1.6; font-size: 14px; flex-grow: 1; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
                                        @trainingEvent.Summary
                                    </p>
                                }
                                else
                                {
                                    <p class="card-text mb-3" style="color: var(--text-secondary); line-height: 1.6; font-size: 14px; flex-grow: 1; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
                                        @(trainingEvent.Description.Length > 150 ? trainingEvent.Description.Substring(0, 150) + "..." : trainingEvent.Description)
                                    </p>
                                }
                                
                                <div style="margin-top: auto;">
                                    <div class="d-flex align-items-center gap-2 mb-3" style="font-size: 13px; padding-top: 16px; border-top: 1px solid var(--border-color); color: var(--text-secondary);">
                                        <i class="fas fa-calendar-alt" style="color: var(--primary);"></i>
                                        <span style="font-weight: 500;">@trainingEvent.StartDate.ToString("dd MMM yyyy, HH:mm")</span>
                                    </div>
                                    
                                    <div class="d-flex gap-2" style="position: relative; z-index: 20; pointer-events: auto;">
                                        @if (!trainingEvent.MaxParticipants.HasValue || trainingEvent.RegisteredParticipants < trainingEvent.MaxParticipants.Value)
                                        {
                                            <a href="@trainingEvent.RegistrationLink" class="btn btn-primary btn-sm" target="_blank" style="flex: 1; position: relative; z-index: 20; pointer-events: auto;" onclick="event.stopPropagation();">
                                                <i class="fas fa-clipboard-list" style="color: #ffffff !important;"></i> Join Now
                                            </a>
                                        }
                                        else
                                        {
                                            <button class="btn btn-secondary btn-sm" disabled style="flex: 1; position: relative; z-index: 20; pointer-events: auto;">
                                                <i class="fas fa-exclamation-circle" style="color: #ffffff !important;"></i> Full
                                            </button>
                                        }
                                        <a href="/events/Details/@trainingEvent.Id" class="btn btn-outline-primary btn-sm" style="flex: 0 0 auto; position: relative; z-index: 20; pointer-events: auto;" onclick="event.stopPropagation();">
                                            <i class="fas fa-info-circle" style="color: #ffffff !important;"></i> Details
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            }
        </div>
    }
    
    <style>
        /* Event card buttons - white icons in both modes */
        .btn-primary i,
        .btn-secondary i,
        .btn-outline-primary i,
        .btn-primary:hover i,
        .btn-secondary:hover i,
        .btn-outline-primary:hover i,
        .btn-primary:active i,
        .btn-secondary:active i,
        .btn-outline-primary:active i,
        .btn-primary:focus i,
        .btn-secondary:focus i,
        .btn-outline-primary:focus i,
        .btn-primary:disabled i,
        .btn-secondary:disabled i,
        .btn-outline-primary:disabled i {
            color: #ffffff !important;
            -webkit-text-fill-color: #ffffff !important;
        }

        /* Light mode - ensure white icons */
        html.light-mode .btn-primary i,
        html.light-mode .btn-secondary i,
        html.light-mode .btn-outline-primary i,
        html.light-mode .btn-primary:hover i,
        html.light-mode .btn-secondary:hover i,
        html.light-mode .btn-outline-primary:hover i,
        html.light-mode .btn-primary:active i,
        html.light-mode .btn-secondary:active i,
        html.light-mode .btn-outline-primary:active i,
        html.light-mode .btn-primary:focus i,
        html.light-mode .btn-secondary:focus i,
        html.light-mode .btn-outline-primary:focus i,
        html.light-mode .btn-primary:disabled i,
        html.light-mode .btn-secondary:disabled i,
        html.light-mode .btn-outline-primary:disabled i,
        html.light-theme .btn-primary i,
        html.light-theme .btn-secondary i,
        html.light-theme .btn-outline-primary i,
        html.light-theme .btn-primary:hover i,
        html.light-theme .btn-secondary:hover i,
        html.light-theme .btn-outline-primary:hover i,
        html.light-theme .btn-primary:active i,
        html.light-theme .btn-secondary:active i,
        html.light-theme .btn-outline-primary:active i,
        html.light-theme .btn-primary:focus i,
        html.light-theme .btn-secondary:focus i,
        html.light-theme .btn-outline-primary:focus i,
        html.light-theme .btn-primary:disabled i,
        html.light-theme .btn-secondary:disabled i,
        html.light-theme .btn-outline-primary:disabled i {
            color: #ffffff !important;
            -webkit-text-fill-color: #ffffff !important;
        }

        /* Event type badge - white text in all modes */
        .badge-event-type {
            color: #ffffff !important;
        }

        html.light-mode .badge-event-type,
        html.light-theme .badge-event-type {
            color: #ffffff !important;
        }

        .card.h-100 {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card.h-100:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2) !important;
        }
            
        @@media (max-width: 768px) {
            .row-cols-md-2 > * {
                width: 100%;
            }
        }
        </style>


</div>


